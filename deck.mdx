import { Appear, Notes } from 'mdx-deck';
import { CodeBlock } from './components/code-block';
import { badTest } from './components/badTest';
import { goodTest } from './components/goodTest';
import { snapshot } from './components/snapshot';
import 'isomorphic-style-loader!css-loader!codemirror/lib/codemirror.css';
import 'isomorphic-style-loader!css-loader!./cm-night-owl.css';
import 'isomorphic-style-loader!css-loader!./styles.css';
import './script.js';

export { default as theme } from './theme';

# Testing the PADM with Jest

<p>Emile Choghi</p>

---

# What this talk is

-   What Jest and react-testing-library are.
-   Why we're not using Enzyme.
-   How the PADM v2 is being tested.
-   What comes next for the PADM?

<img width="70px" height="70px" src="public/standard/smile.png" />

---

# What is Jest?

-   Open source testing library, written by Facebook.
-   For testing all JavaScript code, popular with React.
-   Uses Jasmine as its testing engine.
-   Zero config necessary, lots of tools.

---

# What's inside? üì¶

<ul style={{ fontSize: 40, textAlign: 'left' }}>
    <Appear>
        <li>Snapshot testing.</li>
        <li>Coverage reports.</li>
        <li>Default browser-like environment (JSDOM).</li>
        <li>Interactive "watch" mode</li>
        <li>
            Lots of{' '}
            <a href="https://jestjs.io/docs/en/expect" target="_blank">
                matchers
            </a>
        </li>
    </Appear>
</ul>

```notes
- snapshot testing is a new form of testing built into Jest that lets us know when our UI has changed.
- The first time it runs it generates a snapshot file in the same directory and checks all future tests against it.
- Good for quick regression testing.
- not a replacement for other forms of testing.
- thorough coverage reports with Istanbul.
- watch mode for development, filter by test file or name.
```

---

<CodeBlock>{snapshot}</CodeBlock>

---

# What about Enzyme?

-   React-specific testing library, created by Airbnb.
-   Focused on unit testing.
-   Provides abstractions to traverse DOM and interact with React components.
-   API encourages testing implementation details and component internals.

<Appear>
    <img width="70px" height="70px" src="public/standard/neutral-face.png" />
</Appear>

---

<CodeBlock>{badTest}</CodeBlock>

<div style={{ fontSize: 20 }}>
    <div>Theme: Night Owl by Sarah Drasner</div>
    <div>Font: Dank Mono by Phil Pl√ºckthun</div>
</div>

---

# react-testing-library üêê

<ul style={{ fontSize: 40, textAlign: 'left' }}>
    <Appear>
        <li>No abstractions, just DOM APIs.</li>
        <li>Perfect for integration testing.</li>
        <li>Testing like a user === less broken tests.</li>
        <li>Simple API, no extra config or adapters needed.</li>
    </Appear>
</ul>

```notes
- uses ReactDom.render to render dom, same as user would see.
- No simulated events, just DOM APIs.
```

---

<CodeBlock>{goodTest}</CodeBlock>

---

# Testing PADM v2 ‚úÖ

-   Test components in integration, seldom isolated.
-   Don't rely on snapshots, keep them small.
-   Use üêê API to prevent testing implementation details.
-   Refactoring implementation should not break tests.
-   Future: Git hooks and continuous integration w/Jenkins.

---

# Thank You

<img width="70px" height="70px" src="public/standard/wave.png" />

[testing-padm.netlify.com](https://testing-padm.netlify.com/)
